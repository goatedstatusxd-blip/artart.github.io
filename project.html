<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/project.css">
</head>
<body>

<!-- Back button -->
<div class="back-btn">
  <a href="index.html">‚Üê Back</a>
</div>

<!-- Main project container -->
<div class="project-container"></div>

<!-- Lightbox overlay -->
<div id="lightbox" class="lightbox">
  <span class="close">&times;</span>
  <img class="lightbox-img" src="" alt="">
  <span class="prev">&#10094;</span>
  <span class="next">&#10095;</span>
</div>

<script src="js/projects.js"></script>
<script>
function getQueryParam(name) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(name);
}

const projectName = getQueryParam('project');
const project = projects.find(p => p.title === projectName);
const container = document.querySelector('.project-container');

if(project){
  let mainItem;
  if(project.type === 'video'){
    mainItem = `<iframe src="${project.link}" frameborder="0" allowfullscreen></iframe>`;
  } else {
    mainItem = `<img src="${project.link}" alt="${project.title}">`;
  }

  // For demonstration, gallery includes main thumbnail + additional (can extend)
  const galleryImages = [project.thumbnail];

  container.innerHTML = `
    <div class="main-project">
      ${mainItem}
      <div class="project-info">
        <h1>${project.title.toUpperCase()}</h1>
        <p>${project.description || ''}</p>
      </div>
    </div>

    <!-- Gallery -->
    <div class="project-gallery">
      ${galleryImages.map((img, i) => `<img src="${img}" data-index="${i}" alt="Gallery Image ${i+1}">`).join('')}
    </div>
  `;

  // Lightbox functionality
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.querySelector('.lightbox-img');
  const images = document.querySelectorAll('.project-gallery img');
  let currentIndex = 0;

  function openLightbox(index){
    currentIndex = index;
    lightbox.style.display = 'block';
    lightboxImg.src = images[index].src;
  }

  function closeLightbox(){
    lightbox.style.display = 'none';
  }

  function nextImage(){
    currentIndex = (currentIndex + 1) % images.length;
    lightboxImg.src = images[currentIndex].src;
  }

  function prevImage(){
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    lightboxImg.src = images[currentIndex].src;
  }

  images.forEach((img, idx) => {
    img.addEventListener('click', () => openLightbox(idx));
  });

  document.querySelector('.close').addEventListener('click', closeLightbox);
  document.querySelector('.next').addEventListener('click', nextImage);
  document.querySelector('.prev').addEventListener('click', prevImage);

  // Close lightbox on click outside image
  lightbox.addEventListener('click', e => {
    if(e.target === lightbox) closeLightbox();
  });
}
</script>
</body>
</html>
