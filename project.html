<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project Detail</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/project.css">
</head>
<body>

<div class="container py-5">

  <div class="row g-4 align-items-start">
    <!-- Left: Large image/video -->
    <div class="col-md-6">
      <div id="project-media"></div>
    </div>

    <!-- Right: Info -->
    <div class="col-md-6">
      <h1 id="project-title"></h1>
      <p id="project-description"></p>

      <h3>Gallery</h3>
      <div id="project-gallery" class="row g-2"></div>
    </div>
  </div>

</div>

<script src="js/project-data.js"></script>
<script>
  // Get project from URL parameter, e.g., ?project=Kur%20Sea%20Vai
  const params = new URLSearchParams(window.location.search);
  const projectName = params.get('project');

  const project = projects.find(p => p.title === projectName);

  if (!project) {
    document.body.innerHTML = "<h2>Project not found</h2>";
  } else {
    const mediaContainer = document.getElementById('project-media');
    const titleEl = document.getElementById('project-title');
    const descEl = document.getElementById('project-description');
    const galleryEl = document.getElementById('project-gallery');

    titleEl.textContent = project.title;
    descEl.textContent = project.description || "No description provided";

    // Main media
    if (project.type === "video") {
      if (project.link.includes("youtube") || project.link.includes("drive.google.com")) {
        mediaContainer.innerHTML = `<iframe src="${project.link}" width="100%" height="480" frameborder="0" allowfullscreen></iframe>`;
      } else {
        mediaContainer.innerHTML = `<video src="${project.link}" width="100%" height="480" controls></video>`;
      }
    } else {
      mediaContainer.innerHTML = `<img src="${project.link}" width="100%" height="480" style="object-fit:cover;">`;
    }

    // Gallery (other thumbnails for this project)
    if (project.gallery && project.gallery.length > 0) {
      project.gallery.forEach(item => {
        const col = document.createElement('div');
        col.className = "col-4 col-sm-3 col-md-4";
        let mediaHTML = '';
        if (item.type === "video") {
          mediaHTML = `<iframe src="${item.link}" width="100%" height="120" frameborder="0" allowfullscreen></iframe>`;
        } else {
          mediaHTML = `<img src="${item.link}" width="100%" height="120" style="object-fit:cover;">`;
        }
        col.innerHTML = mediaHTML;
        galleryEl.appendChild(col);
      });
    }
  }
</script>

</body>
</html>
